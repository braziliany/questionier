{
  "always_run_in_app" : false,
  "icon" : {
    "color" : "purple",
    "glyph" : "magic"
  },
  "name" : "å½©äº‘è¯—è¯æ¡Œé¢å¤©æ°”",
  "script" : "\n\/*\n **************************************\n * é…ç½®é¡¹\n **************************************\n *\/\n\n\/\/ åœ°åŒº\nconst locale = \"zh_cn\"\n\n\/\/ èƒŒæ™¯æ˜¯å¦æ˜¯é¢œè‰²\nconst colorMode = false\n\n\/\/ èƒŒæ™¯é¢œè‰²\nconst bgColorStr = \"#000000\"\n\n\/\/ é¢„è§ˆå¤§å°ã€å°ï¼šSmallï¼Œä¸­ï¼šMediumï¼Œå¤§ï¼šLargeã€‘\nconst previewSize = \"Medium\"\n\n\/\/ å½©äº‘å¤©æ°”çš„apiKeyï¼Œè‡ªå·±å»å…è´¹ç”³è¯·ï¼šhttps:\/\/caiyunapp.com\nconst apiKey = \"17Y4IwEB99SaXhwJ\"\n\n\/\/ é»˜è®¤çš„å®šä½ä¿¡æ¯ï¼Œå®šä½å¤±è´¥çš„æ—¶å€™é»˜è®¤è¯»å–\n\/\/ https:\/\/open.caiyunapp.com\/File:Adcode-release-2020-06-10.xlsx.zip\n\/\/ ä¸Šè¿°é“¾æ¥æŸ¥çœ‹å¯¹åº”åœ°åŒºçš„è¯¦ç»†ç»çº¬åº¦\nlet locationData = {\n  \"latitude\": undefined,\n  \"longitude\": undefined,\n  \"locality\": undefined,\n  \"subLocality\": undefined\n}\n\n\/\/ é”å®šåœ°åŒºï¼Œç›´æ¥ä½¿ç”¨ä¸Šè¿°å¡«å†™çš„åœ°å€ä¿¡æ¯ä¸è¿›è¡Œå®šä½\nconst lockLocation = false\n\n\/\/ æ˜¯å¦éœ€è¦é€‰æ‹©å›¾ç‰‡èƒŒæ™¯\nconst changePicBg = true\n\n\/\/ æ—¥ç¨‹æ˜¾ç¤ºæ¡æ•°\nconst maxSchedules = 2\n\n\/\/ æé†’äº‹é¡¹æ˜¾ç¤ºæ¡æ•°\nconst maxReminders = 2\n\n\/\/ å†…å®¹åŒºå·¦å³è¾¹è·\nconst padding = {\n  top: 0,\n  left: 4,\n  bottom: 0,\n  right: 4\n}\n\n\/\/ é¡¶éƒ¨é—®å€™è¯­ï¼Œè‹±æ–‡èŠ±æ ·æ–‡å­—ï¼šhttps:\/\/beizhedenglong.github.io\/weird-fonts\/\nconst greetingText = {\n  nightGreeting: \"ğŸ¦‰ ğ‘‡ğ‘–ğ‘šğ‘’ ğ‘¡ğ‘œ ğ‘”ğ‘’ğ‘¡ ğ‘™ğ‘ğ‘–ğ‘‘~\",\n  morningGreeting: \"ğŸ’« ğºğ‘œğ‘œğ‘‘ ğ‘šğ‘œğ‘Ÿğ‘›ğ‘–ğ‘›ğ‘”~\",\n  noonGreeting: \"ğŸ¥³ ğºğ‘œğ‘œğ‘‘ ğ‘›ğ‘œğ‘œğ‘›~\",\n  afternoonGreeting: \"ğŸ¡ ğºğ‘œğ‘œğ‘‘ ğ‘ğ‘“ğ‘¡ğ‘’ğ‘Ÿğ‘›ğ‘œğ‘œğ‘›~\",\n  eveningGreeting: \"ğŸ³ ğºğ‘œğ‘œğ‘‘ ğ‘’ğ‘£ğ‘’ğ‘›ğ‘–ğ‘›ğ‘”~\"\n}\n\n\/\/ å¤©æ°”å¯¹åº”çš„icon \nconst weatherIcos = {\n  SUNRISE: \"sunrise.fill\", \/\/ æ—¥å‡º\n  CLEAR_DAY: \"sun.max.fill\", \/\/ æ™´ï¼ˆç™½å¤©ï¼‰ CLEAR_DAY\n  CLEAR_NIGHT: \"sun.max.fill\", \/\/ æ™´ï¼ˆå¤œé—´ï¼‰ CLEAR_NIGHT\n  PARTLY_CLOUDY_DAY: \"cloud.sun.fill\", \/\/ å¤šäº‘ï¼ˆç™½å¤©ï¼‰  PARTLY_CLOUDY_DAY\n  PARTLY_CLOUDY_NIGHT: \"cloud.sun.fill\", \/\/ å¤šäº‘ï¼ˆå¤œé—´ï¼‰  PARTLY_CLOUDY_NIGHT\n  CLOUDY: \"cloud.fill\", \/\/ é˜´  CLOUDY\n  LIGHT_HAZE: \"sun.haze.fill\", \/\/ è½»åº¦é›¾éœ¾   LIGHT_HAZE\n  MODERATE_HAZE: \"sun.haze.fill\", \/\/ ä¸­åº¦é›¾éœ¾  MODERATE_HAZE\n  HEAVY_HAZE: \"sun.haze.fill\", \/\/ é‡åº¦é›¾éœ¾   HEAVY_HAZE\n  LIGHT_RAIN: \"cloud.drizzle.fill\", \/\/ å°é›¨ LIGHT_RAIN\n  MODERATE_RAIN: \"cloud.rain.fill\", \/\/ ä¸­é›¨ MODERATE_RAIN\n  HEAVY_RAIN: \"cloud.rain.fill\", \/\/ å¤§é›¨  HEAVY_RAIN\n  STORM_RAIN: \"cloud.heavyrain.fill\", \/\/ æš´é›¨ STORM_RAIN\n  FOG: \"cloud.fog.fill\", \/\/ é›¾ FOG\n  LIGHT_SNOW: \"cloud.snow.fill\", \/\/ å°é›ª  LIGHT_SNOW\n  MODERATE_SNOW: \"cloud.snow.fill\", \/\/ ä¸­é›ª MODERATE_SNOW\n  HEAVY_SNOW: \"cloud.snow.fill\", \/\/ å¤§é›ª  HEAVY_SNOW\n  STORM_SNOW: \"wind.snow.fill\", \/\/ æš´é›ª STORM_SNOW\n  DUST: \"cloud.dust.fill\", \/\/ æµ®å°˜  DUST\n  SAND: \"cloud.dust.fill\", \/\/ æ²™å°˜  SAND\n  WIND: \"cloud.wind.fill\", \/\/ å¤§é£  WIND\n  SUNSET: \"sunset.fill\", \/\/ æ—¥è½\n}\n\n\/\/ å¤©æ°”ä¿¡æ¯æ§åˆ¶\nconst weatherControl = {\n  HUMIDITY: true, \/\/ æ˜¯å¦æ˜¾ç¤ºç›¸å¯¹æ¹¿åº¦\n  COMFORT: true, \/\/ æ˜¯å¦æ˜¾ç¤ºèˆ’é€‚æŒ‡æ•°\n  ULTRAVIOLET: true, \/\/ æ˜¯å¦æ˜¾ç¤ºç´«å¤–çº¿æŒ‡æ•°\n  AQI: true, \/\/ æ˜¯å¦æ˜¾ç¤ºç©ºæ°”è´¨é‡æŒ‡æ•°\n  HEIGHT_LOW: true, \/\/ æ˜¯å¦æ˜¾ç¤ºæ¸©åº¦èŒƒå›´\n  SUNRISE_SUNSET: true, \/\/ æ˜¯å¦æ˜¾ç¤ºæ—¥å‡ºæ—¥è½æ—¶é—´\n  UPDATE_TIME: true, \/\/ æ˜¯å¦æ˜¾ç¤ºå¤©æ°”æ›´æ–°æ—¶é—´\n}\n\n\/\/ å‘¨æ ‡é¢˜\nconst weekTitle = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­']\n\n\/\/ é»˜è®¤æ–‡å­—é¢œè‰²\nconst defaultTextColor = new Color(\"#ffffff\")\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ æ ‡é¢˜æ ·å¼\nlet textStyle = {\n  stack: undefined, \/\/ åŠ å…¥åˆ°å“ªä¸ªå†…å®¹æ ˆæ˜¾ç¤º\n  topMargin: 0, \/\/ é¡¶éƒ¨è·ç¦»\n  text: \"\", \/\/ æ˜¾ç¤ºçš„æ–‡å­—\n  lineLimit: 0, \/\/ è¡Œæ•°æ§åˆ¶ï¼Œ0æ˜¯å…¨éƒ¨å±•ç¤º\n  font: Font.systemFont(18), \/\/ å­—ä½“\n  textColor: defaultTextColor, \/\/ æ–‡å­—é¢œè‰²\n}\n\n\/\/ å›¾ç‰‡æ ·å¼\nlet imgStyle = {\n  stack: undefined, \/\/ åŠ å…¥åˆ°å“ªä¸ªå†…å®¹æ ˆæ˜¾ç¤º\n  topMargin: 0, \/\/ é¡¶éƒ¨è·ç¦»\n  img: undefined, \/\/ å›¾ç‰‡èµ„æº\n  width: 0, \/\/ å®½\n  length: 0, \/\/ é•¿\n  tintColor: undefined, \/\/ å›¾ç‰‡æ¸²æŸ“é¢œè‰²\n}\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\n\/\/ å½“å‰æ—¥æœŸ\nconst currentDate = new Date()\n\/\/ å¹´ä»½\nconst year = currentDate.getFullYear()\n\/\/ æœˆä»½\nconst month = currentDate.getMonth() + 1\n\/\/ æ—¥æœŸ\nconst day = currentDate.getDate()\n\/\/ å°æ—¶\nconst hour = currentDate.getHours()\n\/\/ åˆ†é’Ÿ\nconst minute = currentDate.getMinutes()\n\n\/*\n ****************************************************************************\n ****************************************************************************\n ****************************************************************************\n *\/\n\n\n\/********************************************************************\/\n\/****************************å®šä¹‰å°ç»„ä»¶****************************\/\n\/********************************************************************\/\nconst filename = `${Script.name()}.jpg`\nconst files = FileManager.local()\nconst path = files.joinPath(files.documentsDirectory(), filename)\nconst widget = new ListWidget()\n\n\n\/****************************å°ç»„ä»¶å†…å®¹START****************************\/\n\/\/ å½©äº‘å¤©æ°”ä¿¡æ¯\nconst weatherInfo = await getWeather()\n\/\/ å†œå†ä¿¡æ¯\nconst lunarInfo = await getLunar()\n\/\/ ä»Šæ—¥è¯—è¯\nconst poetry = await getPoetry()\n\/\/ \/\/ æ—¥ç¨‹ä¿¡æ¯\nconst showSchedules = await getSchedules()\n\/\/ æé†’äº‹é¡¹\nconst showReminders = await getReminders()\n\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ å†…å®¹æ’ç‰ˆ\nlet contentStack = widget.addStack()\ncontentStack.layoutHorizontally()\n\/\/ æ•´ä½“å†…å®¹å±…ä¸­å¯¹é½\ncontentStack.centerAlignContent()\n\/\/ èƒŒæ™¯\nwidget.backgroundColor = new Color(bgColorStr)\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ å·¦ä¾§å†…å®¹\nlet leftStack = contentStack.addStack()\nleftStack.layoutVertically()\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ é—®å€™\nlet titleStack = horizontallyCenterStack(leftStack)\n\/\/ é—®å€™è¯­è·å–å†…å®¹\nconst greeting = provideGreeting(currentDate)\n\/\/ æ·»åŠ æ˜¾ç¤ºæ ‡é¢˜  \naddStyleText(titleStack, 0, greeting, 1, Font.systemFont(22), defaultTextColor)\n\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ å¹´æœˆæ—¥\nconst dateStr = getDateStr(currentDate)\naddStyleText(leftStack, 2, dateStr, 1, Font.systemFont(16), new Color(\"#ffcc99\"))\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ æ˜ŸæœŸå‡  \/ å†œå†æ—¥æœŸ\nconst weekDayColor = new Color(\"#ffffff\", 0.9)\nleftStack.addSpacer(2)\nlet dateStack = horizontallyCenterStack(leftStack)\n\/\/ æ·»åŠ æ˜¾ç¤ºæ˜ŸæœŸå‡ \nconst weekDayTitle = getDayWeekTitle(currentDate)\naddStyleText(dateStack, 0, weekDayTitle, 1, Font.systemFont(16), weekDayColor)\ndateStack.addSpacer(4)\n\n\/\/ å†œå†ä¿¡æ¯\nlet infoLunarText = lunarInfo.data.lunar\ninfoLunarText = infoLunarText.substring(12, infoLunarText.length)\n\/\/ æ·»åŠ æ˜¾ç¤ºå†œå†\naddStyleText(dateStack, 0, infoLunarText, 1, Font.systemFont(16), weekDayColor)\n\n\/\/ ç”µæ± ä¿¡æ¯\ndateStack.addSpacer(2)\nconst batteryLevel = Device.batteryLevel() * 100\nconst batteryStr = `ã€“ ${getBatteryLevel()} ã€“`\n\/\/ æ·»åŠ æ˜¾ç¤ºç”µæ± å…·ä½“ä¿¡æ¯\naddStyleText(dateStack, 0, batteryStr, 1, Font.systemFont(15), weekDayColor)\n\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ å¤©æ°”é¢„è­¦ã€é¢„å‘Šä¿¡æ¯\nconst weatherAlertInfo = weatherInfo.alertWeatherTitle \nlet weatherDesc = weatherInfo.weatherDesc\nif (weatherAlertInfo != undefined) {\n  weatherDesc = weatherAlertInfo\n}\n\/\/ æ·»åŠ æ˜¾ç¤ºå¤©æ°”é¢„å‘Šä¿¡æ¯\naddStyleText(leftStack, 3, weatherDesc, 1, Font.systemFont(12), defaultTextColor)\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ æ—¥ç¨‹ã€è¯—è¯\nconst schedulePoetryColor = new Color(\"#ffffff\", 0.7)\nconst scheduleSize = showSchedules.length\nif (scheduleSize > 0) {\n  addStyleText(leftStack, 1, \"----------------------------------\", 1, Font.systemFont(10), schedulePoetryColor)\n  \/\/ æ·»åŠ æ—¥ç¨‹\n  let scheduleIndex = 0\n  for (let schedule of showSchedules) {\n    \/\/ ç´¢å¼•å€¼\n    scheduleIndex++\n    if (scheduleIndex > maxSchedules) {\n      return\n    }\n\n    const scheduleStack = horizontallyCenterStack(leftStack)\n    \/\/ å›¾ç‰‡\n    const img = getSFIco(\"megaphone\")\n    \/\/ å±•ç¤ºico\n    addStyleImg(scheduleStack, 0, img, 12, 12, schedulePoetryColor)\n    scheduleStack.addSpacer(4)\n\n    \/\/ æ—¥ç¨‹æ ‡é¢˜\n    addStyleText(scheduleStack, 0, schedule.title, 1, Font.systemFont(11), schedulePoetryColor)\n\n    \/\/ å¼€å§‹æ—¶é—´\n    const scheduleTimeStack = leftStack.addStack()\n    scheduleTimeStack.layoutHorizontally()\n    scheduleTimeStack.addSpacer(17)\n    \/\/ å±•ç¤ºæ—¶é—´\n    addStyleText(scheduleTimeStack, 0, schedule.timeText, 1, Font.systemFont(11), schedulePoetryColor)\n  }\n} else {\n  \/\/ æ·»åŠ ä»Šæ—¥è¯—è¯\n  leftStack.addSpacer(4)\n  const poetryStack = leftStack.addStack()\n  \/\/ è¯—è¯èƒŒæ™¯\n  poetryStack.backgroundColor = new Color(\"#666\", 0.5)\n  poetryStack.cornerRadius = 4\n  poetryStack.layoutVertically()\n  poetryStack.addSpacer(2)\n  \/\/\n  const poetryInfoStack = poetryStack.addStack()\n  poetryInfoStack.layoutHorizontally()\n  poetryInfoStack.addSpacer(2)\n  const poetryInfo = poetry.data\n  \/\/ æ·»åŠ æ˜¾ç¤ºè¯—è¯\n  const potryContent = `\"${poetryInfo.content.substring(0, poetryInfo.content.length - 1)}\"`\n  addStyleText(poetryInfoStack, 0, potryContent, 1, Font.systemFont(11), schedulePoetryColor)\n\n  \/\/ æ·»åŠ ä½œè€…\n  const authStack = poetryStack.addStack()\n  authStack.layoutHorizontally()\n  authStack.addSpacer()\n  \/\/ æ˜¾ç¤ºä½œè€…\n  const authorText = `âŠ±${poetryInfo.origin.dynasty}Â·${poetryInfo.origin.author}âŠ°`\n  addStyleText(authStack, 0, authorText, 1, Font.systemFont(11), schedulePoetryColor)\n  authStack.addSpacer(20)\n  poetryStack.addSpacer(2)\n}\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\n\n\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ å³ä¾§å†…å®¹\ncontentStack.addSpacer()\nlet rightStack = contentStack.addStack()\n\/\/ å†™æ­»å³ä¾§å®½åº¦\nrightStack.size = new Size(110, 0)\nrightStack.layoutVertically()\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ å¤©æ°”Icon\nconst weatherStack = alignRightStack(rightStack)\nweatherStack.bottomAlignContent()\nlet weatherImg = getSFIco(weatherInfo.weatherIco)\n\/\/ æ˜¾ç¤ºå¤©æ°”\naddStyleImg(weatherStack, 0, weatherImg, 32, 32)\n\/\/ ä½“æ„Ÿæ¸©åº¦\nweatherStack.addSpacer(4)\nconst bodyFeelingTemperature = weatherInfo.bodyFeelingTemperature\naddStyleText(weatherStack, 0, `${bodyFeelingTemperature}Â°C`, 1, Font.boldMonospacedSystemFont(22), defaultTextColor)\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\n\/\/ ç›¸å¯¹æ¹¿åº¦\nif (weatherControl.HUMIDITY) {\n  rightStack.addSpacer(4)\n  const humidityStack = alignRightStack(rightStack)\n  addStyleText(humidityStack, 0, `ç›¸å¯¹æ¹¿åº¦ï¼š${weatherInfo.humidity}`, 1, Font.systemFont(11), defaultTextColor)  \n}\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ èˆ’é€‚æŒ‡æ•°\nif (weatherControl.COMFORT) {\n  rightStack.addSpacer(1)\n  const comfortStack = alignRightStack(rightStack)\n  addStyleText(comfortStack, 0, `èˆ’é€‚æŒ‡æ•°ï¼š${weatherInfo.comfort}`, 1, Font.systemFont(11), defaultTextColor)\n}\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ ç´«å¤–çº¿æŒ‡æ•°\nif (weatherControl.ULTRAVIOLET) {\n  rightStack.addSpacer(1)\n  const ultravioletStack = alignRightStack(rightStack)\n  addStyleText(ultravioletStack, 0, `ç´«å¤–çº¿ï¼š${weatherInfo.ultraviolet}`, 1, Font.systemFont(11), defaultTextColor)\n}\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ ç©ºæ°”è´¨é‡\nif (weatherControl.AQI) {\n  rightStack.addSpacer(1)\n  const aqiInfoStack = alignRightStack(rightStack)\n  addStyleText(aqiInfoStack, 8, `ç©ºæ°”è´¨é‡ï¼š${weatherInfo.aqiInfo}`, 1, Font.systemFont(11), defaultTextColor)\n}\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ é«˜ä½æ¸©\nif (weatherControl.HEIGHT_LOW) {\n  const minTemperature = weatherInfo.minTemperature\n  const maxTemperature = weatherInfo.maxTemperature\n  \/\/ å³å¯¹é½\n  rightStack.addSpacer(3)\n  const tempStack = alignRightStack(rightStack)\n  \/\/ é«˜æ¸©\n  addStyleText(tempStack, 0, `â†‘`, 1, Font.systemFont(10), new Color(\"#ff0000\"))\n  addStyleText(tempStack, 0, `${weatherInfo.maxTemperature}Â°`, 1, Font.systemFont(10), defaultTextColor)\n  \/\/ ä½æ¸©\n  tempStack.addSpacer(6)\n  addStyleText(tempStack, 0, `â†“`, 1, Font.systemFont(10), new Color(\"#2bae85\"))\n  addStyleText(tempStack, 0, `${weatherInfo.minTemperature}Â°`, 1, Font.systemFont(10), defaultTextColor)\n}\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ æ—¥å‡º\nif (weatherControl.SUNRISE_SUNSET) {\n  rightStack.addSpacer(2)\n  let symbolStack = rightStack.addStack()\n  symbolStack.layoutHorizontally()\n  symbolStack.addSpacer()\n  symbolStack.bottomAlignContent()\n  \/\/ æ·»åŠ æ—¥å‡ºicon\n  let sunriseImg = getSFIco(weatherIcos.SUNRISE)\n  addStyleImg(symbolStack, 0, sunriseImg, 15, 15)\n  symbolStack.addSpacer(4)\n  \/\/ æ—¥å‡ºæ—¶é—´ \/ æ ·å¼\n  addStyleText(symbolStack, 0, weatherInfo.sunrise, 1, Font.systemFont(10), defaultTextColor)\n  \/\/***********************\/\/\n  \/\/ æ—¥è½\n  symbolStack.addSpacer(4)\n  \/\/ æ·»åŠ æ—¥è½icon\n  let sunsetImg = getSFIco(weatherIcos.SUNSET)\n  addStyleImg(symbolStack, 0, sunsetImg, 15, 15)\n  symbolStack.addSpacer(4)\n  \/\/ æ—¥è½æ—¶é—´ \/ æ ·å¼\n  addStyleText(symbolStack, 0, weatherInfo.sunset, 1, Font.systemFont(10), defaultTextColor)\n}\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ å¤©æ°”æ›´æ–°æ—¶é—´\nif (weatherControl.UPDATE_TIME) {\n  \/\/ æ›´æ–°æ—¶é—´\n  rightStack.addSpacer(2)\n  const updateTimeStack = alignRightStack(rightStack)\n  addStyleText(updateTimeStack, 0, `ä¸Šæ¬¡æ›´æ–° â†’ ${hour}:${minute}`, 1, Font.systemFont(8), new Color(\"#ffffff\", 0.8))  \n}\n\n\/*****************************å°ç»„ä»¶å†…å®¹ENd*****************************\/\n\nif (!colorMode && !config.runsInWidget && changePicBg) {\n  \/\/ Determine if user has taken the screenshot.\n  const okTips = \"æ‚¨çš„å°éƒ¨ä»¶èƒŒæ™¯å·²å‡†å¤‡å°±ç»ª\"\n  let message = \"å›¾ç‰‡æ¨¡å¼æ”¯æŒç›¸å†Œç…§ç‰‡&èƒŒæ™¯é€æ˜\"\n  let options = [\"å›¾ç‰‡é€‰æ‹©\",\"é€æ˜èƒŒæ™¯\"]\n  let isTransparentMode = await generateAlert(message, options)\n  if (!isTransparentMode) {\n    let img = await Photos.fromLibrary()\n    message = okTips\n    const resultOptions = [\"å¥½çš„\"]\n    await generateAlert(message, resultOptions)\n    files.writeImage(path, img)\n  } else {\n    message = \"ä»¥ä¸‹æ˜¯ã€é€æ˜èƒŒæ™¯ã€‘ç”Ÿæˆæ­¥éª¤ï¼Œå¦‚æœä½ æ²¡æœ‰å±å¹•æˆªå›¾è¯·é€€å‡ºï¼Œå¹¶è¿”å›ä¸»å±å¹•é•¿æŒ‰è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚æ»‘åŠ¨åˆ°æœ€å³è¾¹çš„ç©ºç™½é¡µæˆªå›¾ã€‚ç„¶åé‡æ–°è¿è¡Œï¼\"\n    let exitOptions = [\"ç»§ç»­(å·²æœ‰æˆªå›¾)\",\"é€€å‡º(æ²¡æœ‰æˆªå›¾)\"]\n  \n    let shouldExit = await generateAlert(message,exitOptions)\n    if (shouldExit) return\n  \n    \/\/ Get screenshot and determine phone size.\n    let img = await Photos.fromLibrary()\n    let height = img.size.height\n    let phone = phoneSizes()[height]\n    if (!phone) {\n      message = \"æ‚¨ä¼¼ä¹é€‰æ‹©äº†éiPhoneå±å¹•æˆªå›¾çš„å›¾åƒï¼Œæˆ–è€…ä¸æ”¯æŒæ‚¨çš„iPhoneã€‚è¯·ä½¿ç”¨å…¶ä»–å›¾åƒå†è¯•ä¸€æ¬¡!\"\n      await generateAlert(message,[\"å¥½çš„ï¼æˆ‘ç°åœ¨å»æˆªå›¾\"])\n      return\n    }\n  \n    \/\/ Prompt for widget size and position.\n    message = \"æ‚¨æƒ³è¦åˆ›å»ºä»€ä¹ˆå°ºå¯¸çš„å°éƒ¨ä»¶ï¼Ÿ\"\n    let sizes = [\"å°å·\",\"ä¸­å·\",\"å¤§å·\"]\n    let size = await generateAlert(message,sizes)\n    let widgetSize = sizes[size]\n  \n    message = \"æ‚¨æƒ³å®ƒåœ¨ä»€ä¹ˆä½ç½®ï¼Ÿ\"\n    message += (height == 1136 ? \" (è¯·æ³¨æ„ï¼Œæ‚¨çš„è®¾å¤‡ä»…æ”¯æŒä¸¤è¡Œå°éƒ¨ä»¶ï¼Œå› æ­¤ä¸­é—´å’Œåº•éƒ¨é€‰é¡¹ç›¸åŒã€‚)\" : \"\")\n  \n    \/\/ Determine image crop based on phone size.\n    let crop = { w: \"\", h: \"\", x: \"\", y: \"\" }\n    if (widgetSize == \"å°å·\") {\n      crop.w = phone.å°å·\n      crop.h = phone.å°å·\n      let positions = [\"é¡¶éƒ¨ å·¦è¾¹\",\"é¡¶éƒ¨ å³è¾¹\",\"ä¸­é—´ å·¦è¾¹\",\"ä¸­é—´ å³è¾¹\",\"åº•éƒ¨ å·¦è¾¹\",\"åº•éƒ¨ å³è¾¹\"]\n      let position = await generateAlert(message,positions)\n    \n      \/\/ Convert the two words into two keys for the phone size dictionary.\n      let keys = positions[position].split(' ')\n      crop.y = phone[keys[0]]\n      crop.x = phone[keys[1]]\n    \n    } else if (widgetSize == \"ä¸­å·\") {\n      crop.w = phone.ä¸­å·\n      crop.h = phone.å°å·\n    \n      \/\/ ä¸­å· and å¤§å· widgets have a fixed x-value.\n      crop.x = phone.å·¦è¾¹\n      let positions = [\"é¡¶éƒ¨\",\"ä¸­é—´\",\"åº•éƒ¨\"]\n      let position = await generateAlert(message,positions)\n      let key = positions[position].toLowerCase()\n      crop.y = phone[key]\n    \n    } else if(widgetSize == \"å¤§å·\") {\n      crop.w = phone.ä¸­å·\n      crop.h = phone.å¤§å·\n      crop.x = phone.å·¦è¾¹\n      let positions = [\"é¡¶éƒ¨\",\"åº•éƒ¨\"]\n      let position = await generateAlert(message,positions)\n    \n      \/\/ å¤§å· widgets at the åº•éƒ¨ have the \"ä¸­é—´\" y-value.\n      crop.y = position ? phone.ä¸­é—´ : phone.é¡¶éƒ¨\n    }\n    \n    \/\/ Crop image and finalize the widget.\n    let imgCrop = cropImage(img, new Rect(crop.x,crop.y,crop.w,crop.h))\n    \n    message = \"æ‚¨çš„å°éƒ¨ä»¶èƒŒæ™¯å·²å‡†å¤‡å°±ç»ªï¼Œé€€å‡ºåˆ°æ¡Œé¢é¢„è§ˆã€‚\"\n    const resultOptions = [\"å¥½çš„\"]\n    await generateAlert(message, resultOptions)\n    files.writeImage(path, imgCrop)\n  }  \n\n}\n\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nif (colorMode) {\n  widget.backgroundColor = new Color(bgColorStr)\n} else {\n  widget.backgroundImage = files.readImage(path)\n}\n\/\/ è®¾ç½®è¾¹è·(ä¸Šï¼Œå·¦ï¼Œä¸‹ï¼Œå³)\nwidget.setPadding(padding.top, padding.left, padding.bottom, padding.right)\n\/\/ è®¾ç½®ç»„ä»¶\nScript.setWidget(widget)\n\/\/ å®Œæˆè„šæœ¬\nScript.complete()\n\/\/ é¢„è§ˆ\nif (previewSize == \"Large\") {\n  widget.presentLarge()\n} else if (previewSize == \"Medium\") {\n  widget.presentMedium()\n} else {\n  widget.presentSmall()\n}\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\n\n\n\n\n\n\/*\n ************************************************************************************\n *\/\n\n\/\/ Generate an alert with the provided array of options.\nasync function generateAlert(message,options) {\n  let alert = new Alert()\n  alert.message = message\n  \n  for (const option of options) {\n    alert.addAction(option)\n  }\n  \n  let response = await alert.presentAlert()\n  return response\n}\n\n\/\/ Crop an image into the specified rect.\nfunction cropImage(img,rect) {\n  let draw = new DrawContext()\n  draw.size = new Size(rect.width, rect.height)\n  draw.drawImageAtPoint(img,new Point(-rect.x, -rect.y))  \n  return draw.getImage()\n}\n\n\/\/ Pixel sizes and positions for widgets on all supported phones.\nfunction phoneSizes() {\n  let phones = {  \n  \"2688\": {\n      \"å°å·\":  507,\n      \"ä¸­å·\":  1080,\n      \"å¤§å·\":  1137,\n      \"å·¦è¾¹\":  81,\n      \"å³è¾¹\":  654,\n      \"é¡¶éƒ¨\":  228,\n      \"ä¸­é—´\":  858,\n      \"åº•éƒ¨\":  1488\n  },\n  \n  \"1792\": {\n      \"å°å·\":  338,\n      \"ä¸­å·\":  720,\n      \"å¤§å·\":  758,\n      \"å·¦è¾¹\":  54,\n      \"å³è¾¹\":  436,\n      \"é¡¶éƒ¨\":  160,\n      \"ä¸­é—´\":  580,\n      \"åº•éƒ¨\":  1000\n  },\n  \n  \"2436\": {\n      \"å°å·\":  465,\n      \"ä¸­å·\":  987,\n      \"å¤§å·\":  1035,\n      \"å·¦è¾¹\":  69,\n      \"å³è¾¹\":  591,\n      \"é¡¶éƒ¨\":  213,\n      \"ä¸­é—´\":  783,\n      \"åº•éƒ¨\":  1353\n  },\n  \n  \"2208\": {\n      \"å°å·\":  471,\n      \"ä¸­å·\":  1044,\n      \"å¤§å·\":  1071,\n      \"å·¦è¾¹\":  99,\n      \"å³è¾¹\":  672,\n      \"é¡¶éƒ¨\":  114,\n      \"ä¸­é—´\":  696,\n      \"åº•éƒ¨\":  1278\n  },\n  \n  \"1334\": {\n      \"å°å·\":  296,\n      \"ä¸­å·\":  642,\n      \"å¤§å·\":  648,\n      \"å·¦è¾¹\":  54,\n      \"å³è¾¹\":  400,\n      \"é¡¶éƒ¨\":  60,\n      \"ä¸­é—´\":  412,\n      \"åº•éƒ¨\":  764\n  },\n  \n  \"1136\": {\n      \"å°å·\":  282,\n      \"ä¸­å·\":  584,\n      \"å¤§å·\":  622,\n      \"å·¦è¾¹\":  30,\n      \"å³è¾¹\":  332,\n      \"é¡¶éƒ¨\":  59,\n      \"ä¸­é—´\":  399,\n      \"åº•éƒ¨\":  399\n  }\n  }\n  return phones\n}\n\n\n\/*\n ****************************************************************************************************************************\n ****************************************************************************************************************************\n ****************************************************************************************************************************\n *\/\n\n\/*\n **************************************\n * æ·»åŠ ä¸€è¡Œæ–‡æœ¬æ•°æ®æ˜¾ç¤º\n **************************************\n *\/\nfunction addStyleText(stack, topMargin, text, lineLimit, font, textColor, width = 0) {\n  textStyle.stack = stack\n  textStyle.topMargin = topMargin\n  textStyle.text = text\n  textStyle.lineLimit = lineLimit\n  textStyle.font = font\n  textStyle.textColor = textColor\n  addText(textStyle)\n  textStyle.lineLimit = 0\n}\n\nfunction addText(style, width = 0) {\n  style.stack.size = new Size(width, 0)\n  style.stack.addSpacer(style.topMargin)\n  let textSpan = style.stack.addText(style.text + \"\")\n  textSpan.font = style.font\n  textSpan.lineLimit = style.lineLimit\n  textSpan.textColor = style.textColor\n}\n\n\n\/*\n **************************************\n * æ·»åŠ å›¾ç‰‡æ˜¾ç¤º\n **************************************\n *\/\nfunction addStyleImg(stack, topMargin, img, width, length, tintColor) {\n  imgStyle.stack = stack\n  imgStyle.topMargin = topMargin\n  imgStyle.img = img\n  imgStyle.width = width\n  imgStyle.length = length\n  imgStyle.tintColor = tintColor\n  addImg(imgStyle)\n}\n\nfunction addImg(style) {\n  const stack = style.stack\n  stack.addSpacer(style.topMargin)\n  let imgSpan = stack.addImage(style.img)\n  imgSpan.imageSize = new Size(style.width, style.length)\n  const tintColor = style.tintColor\n  if (tintColor != undefined) {\n    imgSpan.tintColor = tintColor\n  }\n}\n\n\n\/*\n **************************************\n * æ ¼å¼åŒ–æ—¶é—´\n **************************************\n *\/\nfunction getDateStr(date, formatter = \"yyyyå¹´MMæœˆdæ—¥\") {\n  let df = new DateFormatter()\n  df.locale = locale\n  df.dateFormat = formatter\n  return df.string(date)\n}\n\n\/*\n **************************************\n * æŒ‰ç…§æ—¶é—´è·å–é—®å€™è¯­\n **************************************\n *\/\nfunction provideGreeting(date) {\n  const hour = date.getHours()\n  if (hour    < 5)  { return greetingText.nightGreeting }\n  if (hour    < 11) { return greetingText.morningGreeting }\n  if (hour    > 11 && hour-12 < 1)  { return greetingText.noonGreeting }\n  if (hour-12 < 7)  { return greetingText.afternoonGreeting }\n  if (hour-12 < 10) { return greetingText.eveningGreeting }\n  return greetingText.nightGreeting\n}\n\n\n\/*\n **************************************\n * è·å–å½©äº‘å¤©æ°”\n **************************************\n *\/\nasync function getWeather() {\n  let weatherInfo = {}\n  const location = await getLocation()\n  log(\"å®šä½ä¿¡æ¯ï¼š\" + location.locality + \"Â·\" + location.subLocality)\n  \/\/ å½©äº‘å¤©æ°”åŸŸå\n  const DOMAIN = `https:\/\/api.caiyunapp.com\/v2.5\/${apiKey}\/${location.longitude},${location.latitude}\/weather.json?alert=true`\n  const weatherJsonData = await getJson(DOMAIN)\n  if (weatherJsonData.status == \"ok\") {\n    log(\"å¤©æ°”æ•°æ®è¯·æ±‚æˆåŠŸ\")\n    \/\/ å¤©æ°”çªå‘é¢„è­¦\n    const alertWeatherTitle = weatherJsonData.result.alert.content.title\n    log(\"çªå‘çš„å¤©æ°”é¢„è­¦==>\" + alertWeatherTitle)\n    weatherInfo.alertWeatherTitle = alertWeatherTitle\n\n    \/\/ æ¸©åº¦èŒƒå›´\n    const temperatureData = weatherJsonData.result.daily.temperature[0]\n    \/\/ æœ€ä½æ¸©åº¦\n    const minTemperature = temperatureData.min\n    \/\/ æœ€é«˜æ¸©åº¦\n    const maxTemperature = temperatureData.max\n    log(\"æ¸©åº¦==>\" + minTemperature + \"|\" + maxTemperature)\n    weatherInfo.minTemperature = Math.round(minTemperature)\n    weatherInfo.maxTemperature = Math.round(maxTemperature)\n\n    \/\/ ä½“æ„Ÿæ¸©åº¦\n    const bodyFeelingTemperature = weatherJsonData.result.realtime.apparent_temperature \n    log(\"ä½“æ„Ÿæ¸©åº¦==>\" + bodyFeelingTemperature)\n    weatherInfo.bodyFeelingTemperature = Math.round(bodyFeelingTemperature)\n\n    \/\/ å¤©æ°”çŠ¶å†µ weatherIcos[weatherIco]\n    const weather = weatherJsonData.result.realtime.skycon\n    log(\"å¤©æ°”çŠ¶å†µ==>\" + weather + \"|\" + weatherIcos[weather])\n  weatherInfo.weatherIco = weatherIcos[weather]\n\n    \/\/ å¤©æ°”æè¿°\n    const weatherDesc = weatherJsonData.result.forecast_keypoint\n    log(\"å¤©æ°”æè¿°==>\" + weatherDesc)\n    weatherInfo.weatherDesc = weatherDesc\n\n    \/\/ ç›¸å¯¹æ¹¿åº¦\n    const humidity = (weatherJsonData.result.realtime.humidity * 100) + \"%\"\n    log(\"ç›¸å¯¹æ¹¿åº¦==>\" + humidity)\n    weatherInfo.humidity = humidity\n\n    \/\/ èˆ’é€‚æŒ‡æ•°\n    const comfort = weatherJsonData.result.realtime.life_index.comfort.desc\n    log(\"èˆ’é€‚æŒ‡æ•°==>\" + comfort)\n    weatherInfo.comfort = comfort\n\n    \/\/ ç´«å¤–çº¿æŒ‡æ•°\n    const ultraviolet = weatherJsonData.result.realtime.life_index.ultraviolet.desc\n    log(\"ç´«å¤–çº¿æŒ‡æ•°==>\" + ultraviolet)\n    weatherInfo.ultraviolet = ultraviolet\n\n    \/\/ ç©ºæ°”è´¨é‡\n    const aqi = weatherJsonData.result.realtime.air_quality.aqi.chn\n    const aqiInfo = airQuality(aqi)\n    log(\"ç©ºæ°”è´¨é‡==>\" + aqiInfo)\n    weatherInfo.aqiInfo = aqiInfo\n\n    \/\/ æ—¥å‡ºæ—¥è½\n    const astro = weatherJsonData.result.daily.astro[0]\n    \/\/ æ—¥å‡º\n    const sunrise = astro.sunrise.time\n    \/\/ æ—¥è½\n    const sunset = astro.sunset.time\n    log(\"æ—¥å‡º==>\" + sunrise + \"ï¼Œæ—¥è½==>\" + sunset)\n    weatherInfo.sunrise = sunrise.toString()\n    weatherInfo.sunset = sunset.toString()\n  }\n\n  return weatherInfo\n}\n\n\n\/*\n **************************************\n * è·å–å®šä½\n **************************************\n *\/\nasync function getLocation() {\n  if (!lockLocation) {\n    try {\n      const location = await Location.current()\n      const geocode = await Location.reverseGeocode(location.latitude, location.longitude, locale)\n      locationData.latitude = location.latitude\n      locationData.longitude = location.longitude\n      const geo = geocode[0]\n      \/\/ å¸‚\n      locationData.locality = geo.locality\n      \/\/ åŒº\n      locationData.subLocality = geo.subLocality\n      \/\/ è¡—é“\n      locationData.street = geo.thoroughfare\n      log(\"å®šä½ä¿¡æ¯ï¼šlatitude=\" + location.latitude + \"ï¼Œlongitude=\" + location.longitude + \"ï¼Œlocality=\"\n       + locationData.locality + \"ï¼ŒsubLocality=\" + locationData.subLocality + \"ï¼Œstreet=\" + locationData.street)\n    } catch(e) {\n      log(\"å®šä½å‡ºé”™äº†ï¼Œ\" + e.toString())\n    }\n  }\n\n  return locationData\n}\n\n\n\/*\n **************************************\n * æ—¥ç¨‹ç­›é€‰\n **************************************\n *\/\nfunction shouldShowSchedule(schedule) {\n  const currentDate = new Date()\n  \/\/ è¢«å–æ¶ˆçš„æ—¥ç¨‹ä¸ç”¨æ˜¾ç¤º\n  if (schedule.title.startsWith(\"Canceled:\")) { return false }\n  \/\/ ä¸å½“å‰æ—¶é—´åšæ¯”è¾ƒ\n  let timeInterval = schedule.startDate.getTime() > currentDate.getTime()\n  \/\/ è¿”å›å…¨å¤©è·Ÿè¿˜æ²¡è¿‡å»çš„\n  return timeInterval || schedule.isAllDay\n}\n\n\n\/*\n **************************************\n * æ—¥ç¨‹åˆ—è¡¨\n **************************************\n *\/\nasync function getSchedules() {\n  let showSchedules = []\n  const todaySchedules = await CalendarEvent.today([])\n  for (const schedule of todaySchedules) {\n    if (shouldShowSchedule(schedule)) {\n      \/\/ æ—¥ç¨‹\n      let scheduleObj = {}\n      \/\/ å¼€å§‹æ—¶é—´\n      const startDate = schedule.startDate\n        \/\/ å¼€å§‹å°æ—¶\n      const startHour = (\"0\" + startDate.getHours()).slice(-2)\n      \/\/ å¼€å§‹åˆ†é’Ÿ\n      const startMinute = (\"0\" + startDate.getMinutes()).slice(-2)\n      \n      \/\/ ç»“æŸæ—¶é—´\n      const endDate = schedule.endDate\n      \/\/ ç»“æŸå°æ—¶\n      const endHour = (\"0\" + endDate.getHours()).slice(-2)\n      \/\/ ç»“æŸåˆ†é’Ÿ\n      const endMinute = (\"0\" + endDate.getMinutes()).slice(-2)\n      \n      \/\/ æ—¶é—´å®‰æ’å±•ç¤º\n      let timeText = startHour + \":\" + startMinute + \"â†’\" + endHour + \":\" + endMinute\n      if (schedule.isAllDay) {\n        timeText = \"å…¨å¤©\"\n      }\n\n      \/\/ æ„é€ æ ¼å¼åçš„æ—¥ç¨‹\n      scheduleObj.title = schedule.title\n      scheduleObj.timeText = timeText \n      log(\">>æ—¥ç¨‹ï¼š\" + scheduleObj.title + \"==>\" + timeText)\n      showSchedules.push(scheduleObj)\n    }\n  }\n\n  return showSchedules\n}\n\n\n\/*\n **************************************\n * æé†’äº‹é¡¹åˆ—è¡¨\n **************************************\n *\/\nasync function getReminders() {\n  let showReminders = []\n  const allReminders = await Reminder.all();\n  for (const reminder of allReminders) {\n    if (!reminder.isCompleted) {\n      let reminderObj = {}\n      \/\/ æ„é€ æ ¼å¼åçš„æé†’äº‹é¡¹\n      reminderObj.title = reminder.title\n      reminderObj.dueDate = reminder.dueDate\n      log(\">>æé†’äº‹é¡¹ï¼š\" + reminderObj.title + \"==>\" + reminderObj.dueDate)\n      showReminders.push(reminder)\n    }\n  }\n\n  return showReminders\n}\n\n\n\/*\n **************************************\n * ç½‘ç»œè¯·æ±‚getå°è£…\n **************************************\n *\/\nasync function getJson(url) {\n  const request = new Request(url)\n  const defaultHeaders = {\n    \"Accept\": \"*\/*\",\n    \"Content-Type\": \"application\/json\"\n  }\n\n  request.url = url\n  request.method = 'GET'\n  request.headers = defaultHeaders\n\n  const data = await request.loadJSON()\n\n  return data\n}\n\n\n\/*\n **************************************\n * è·å–icon\n **************************************\n *\/\nfunction getSFIco(batteryKey) {\n  return SFSymbol.named(batteryKey).image\n}\n\n\n\/*\n **************************************\n * ç©ºæ°”è´¨é‡æŒ‡æ ‡\n **************************************\n *\/\nfunction airQuality(levelNum) {\n  \/\/ 0-50 ä¼˜ï¼Œ51-100 è‰¯ï¼Œ101-150 è½»åº¦æ±¡æŸ“ï¼Œ151-200 ä¸­åº¦æ±¡æŸ“\n  \/\/ 201-300 é‡åº¦æ±¡æŸ“ï¼Œ>300 ä¸¥é‡æ±¡æŸ“\n  if (levelNum >= 0 && levelNum <= 50) {\n    return \"ä¼˜ç§€\"\n  } else if (levelNum >= 51 && levelNum <= 100) {\n    return \"è‰¯å¥½\"\n  } else if (levelNum >= 101 && levelNum <= 150) {\n    return \"è½»åº¦\"\n  } else if (levelNum >= 151 && levelNum <= 200) {\n    return \"ä¸­åº¦\"\n  } else if (levelNum >= 201 && levelNum <= 300) {\n    return \"é‡åº¦\"\n  } else {\n    return \"ä¸¥é‡\"\n  }\n}\n\n\n\/*\n **************************************\n * è·å–ç”µæ± ä¿¡æ¯\n **************************************\n *\/\nfunction getBatteryLevel() {\n  const batteryLevel = Device.batteryLevel()\n  const batteryAscii = `${Math.round(batteryLevel * 100)}%`\n  log(\"ç”µæ± ==>\" + batteryAscii)\n  return batteryAscii;\n}\n\n\n\/*\n **************************************\n * åœ¨çº¿è·å–å†œå†ä¿¡æ¯\n **************************************\n *\/\nasync function getLunar() {\n  const request = new Request(\"https:\/\/www.iamwawa.cn\/home\/nongli\/ajax\")\n  const defaultHeaders = {\n    \"Accept\": \"*\/*\",\n    \"Content-Type\": \"application\/json\"\n  }\n  request.method = 'POST'\n  request.headers = defaultHeaders\n  request.addParameterToMultipart(\"type\", \"solar\")\n  request.addParameterToMultipart(\"year\", year + \"\")\n  request.addParameterToMultipart(\"month\", month + \"\")\n  request.addParameterToMultipart(\"day\", day + \"\")\n  const data = await request.loadJSON()\n  return data\n}\n\n\/*\n **************************************\n * åœ¨çº¿è·å–ä»Šæ—¥è¯—è¯\n **************************************\n *\/\nasync function getPoetry() {\n  const request = new Request(\"https:\/\/v2.jinrishici.com\/sentence\")\n  const defaultHeaders = {\n    \"Accept\": \"*\/*\",\n    \"Content-Type\": \"application\/json\"\n  }\n  request.method = 'GET'\n  request.headers = defaultHeaders\n  const data = await request.loadJSON()\n  log(\"è¯—è¯==>\" + data.status)\n  return data\n }\n\n\n\/*\n **************************************\n * è·å–æ˜ŸæœŸå‡ \n **************************************\n *\/\n function getDayWeekTitle(date) {\n  return weekTitle[date.getDay()]\n }\n\n\n\/*\n **************************************\n * å³å¯¹é½\n **************************************\n *\/\nfunction alignRightStack(alignmentStack) {\n  let returnStack = alignmentStack.addStack()\n  returnStack.layoutHorizontally()\n  returnStack.addSpacer()\n  return returnStack\n}\n\n\n\/*\n **************************************\n * æ°´å¹³å±…ä¸­\n **************************************\n *\/\nfunction horizontallyCenterStack(alignmentStack) {\n  let returnStack = alignmentStack.addStack()\n  returnStack.layoutHorizontally()\n  returnStack.centerAlignContent()\n  return returnStack\n}\n\n\n\/*\n **************************************\n * å‚ç›´å±…ä¸­\n **************************************\n *\/\nfunction verticallyCenterStack(alignmentStack) {\n  let returnStack = alignmentStack.addStack()\n  returnStack.layoutVertically()\n  returnStack.centerAlignContent()\n  return returnStack\n}",
  "share_sheet_inputs" : [

  ]
}